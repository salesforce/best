<template>
    <nav class="slds-context-bar__secondary navCenter" role="navigation" aria-label={i18n.globalNav}>
        <ul class="slds-grid slds-has-flexi-truncate">
            <template for:each={state.navItems} for:item="item">
                <li is="one-app-nav-bar-item-root"
                        aria-hidden={item.hidden}
                        key={item.id}
                        custom-id={item.id}
                        action={item.navAction}
                        is-hidden={item.hidden}
                        label={item.label}
                        selected={item.selected}
                        url={item.route}
                        temporary={item.isTemporary}
                        detail={item.isDetail}
                        onselect={handleSelect}
                        entity-api-name={item.entityApiName}
                        show-menu={item.showMenu}
                        dropdown-menu={item.dropdownMenu}
                ></li>
            </template>

            <li class={computedOverflowClass} aria-hidden={hasNoOverflow}>
                <one-tmp-button-menu
                    class="slds-grid slds-grid_vertical-stretch"
                    onselect={handleSelect}
                    menu-alignment="right"
                    is-more="true"
                    label={i18n.more}
                    alternative-text={i18n.showMore}
                    disabled={hasNoOverflow}
                    unsaved={hasHiddenTempTabs}>
                    <template for:each={overflowItems} for:item="item">
                        <one-tmp-menu-item
                            if:false={item.isTemporary}
                            url={item.route}
                            value={item.id}
                            key={item.id}
                            label={item.label}
                        ></one-tmp-menu-item>
                        <one-tmp-menu-item
                            if:true={item.isTemporary}
                            url={item.route}
                            value={item.id}
                            key={item.id}
                            label={item.label}
                            unsaved=true
                            class-name="slds-is-unsaved"
                        ></one-tmp-menu-item>
                    </template>
                </one-tmp-button-menu>
            </li>

            <template if:true={hasNoItems}>
                <li class="no-items slds-context-bar__item slds-grid slds-no-hover">
                    <span class="slds-context-bar__label-action">No items</span>
                </li>
            </template>

            <!-- edit globalNav action (pencil or info icon) -->
            <template if:true={cmnEnabled}>
                <li class="editGlobalNav slds-col_bump-left slds-grid slds-grid_vertical-align-center" if:true={state.showPencil}>
                    <button title={i18n.editTabs} onclick={handleEditTabs} class="slds-button slds-button_icon slds-m-right_medium">
                        <one-tmp-primitive-icon
                            icon-name="utility:edit"
                            size="x-small"
                            variant="bare"
                            class="slds-button__icon"></one-tmp-primitive-icon>

                        <span class="slds-assistive-text">{i18n.editTabsAssistiveText}</span>
                    </button>
                </li>
                <li class="editGlobalNav slds-col_bump-left slds-grid slds-grid_vertical-align-center slds-m-right_medium slds-button_icon" if:false={state.showPencil}>
                    <!--<lightning-helptext content={state.editInfoMessage} icon-name="utility:info"></lightning-helptext>-->
                </li>
            </template>
        </ul>
    </nav>
</template>
